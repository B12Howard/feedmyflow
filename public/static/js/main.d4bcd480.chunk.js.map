{"version":3,"sources":["provider/firebase.js","provider/auth.js","components/header/header.js","view/home/home.js","components/authChecker/authChecker.js","view/login/login.js","components/creationModal/creationModal.js","view/calendar/calendar.js","components/protectedRoute/protectedRoute.js","App.js","serviceWorker.js","index.js"],"names":["fire","firebase","initializeApp","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","authContext","createContext","ProvideAuth","children","auth","useProvideAuth","Provider","value","useAuth","useContext","useState","haveTriedLogin","isConnected","user","undefined","firebaseTestLogin","authStatus","setAuthStatus","cookies","Cookies","getURLParameter","name","decodeURIComponent","RegExp","exec","window","location","href","replace","get","url","a","async","fetch","method","response","json","jsondata","signInWithCustomToken","token","Promise","resolve","reject","console","log","then","catch","err","remove","redirectCheck","index","setTimeout","useEffect","unsubscribe","onAuthStateChanged","signOut","props","history","push","signIn","redirectToDashboard","code","state","tokenFunctionURL","encodeURIComponent","res","set","toString","error","Header","anchorEl","setAnchorEl","isMenuOpen","Boolean","menuId","renderMenu","Menu","anchorOrigin","vertical","horizontal","id","keepMounted","transformOrigin","open","onClose","MenuItem","onClick","AppBar","position","color","Toolbar","Typography","className","variant","IconButton","edge","aria-label","aria-controls","aria-haspopup","MailOutline","event","currentTarget","AccountCircle","Home","makeStyles","theme","paper","marginTop","spacing","display","flexDirection","alignItems","avatar","margin","backgroundColor","palette","secondary","main","form","width","submit","Button","AuthChecker","CircularProgress","Login","component","rest","render","to","pathname","from","useStyles","modal","justifyContent","CreationModal","forwardRef","ref","isEvent","isMedia","media","db","firestore","userUid","currentUser","uid","classes","React","setOpen","haveModification","setHaveModification","canSave","setCanSave","Date","publicationTime","toDate","setPublicationTime","shareCommentary","setShareCommentary","shareMediaCategory","setShareMediaCategory","visibility","setVisibility","title","mediaTitle","setMediaTitle","description","mediaDescription","setMediaDescription","originalUrl","mediaUrl","setMediaUrl","useImperativeHandle","handleOpen","handleClose","Modal","aria-labelledby","aria-describedby","closeAfterTransition","BackdropComponent","Backdrop","BackdropProps","timeout","Fade","in","Card","CardContent","rawDate","rawTime","Divider","Grid","container","utils","DateFnsUtils","item","xs","md","label","format","onChange","e","KeyboardButtonProps","ampm","minutesStep","Select","labelId","target","TextField","fullWidth","multiline","mediaRender","postId","confirm","collection","doc","delete","linekdinPost","split","getDate","getMonth","getFullYear","getHours","getMinutes","update","disabled","add","localizer","momentLocalizer","moment","Mycalendar","eventsList","setEventsList","creationModalRef","useRef","eventsRef","unsubscribeSnapshot","onSnapshot","documents","newEventsList","docs","map","query","i","data","start","sort","b","current","slice","length","Container","lg","Paper","popup","step","defaultDate","defaultView","culture","events","drilldownView","style","height","views","month","week","onSelectEvent","itemId","key","r","ProtectedRoute","Component","comp","App","exact","path","MyCalendar","hostname","match","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.d4bcd480.chunk.js","sourcesContent":["import firebase from 'firebase'\r\nvar config = {\r\n  apiKey: process.env.REACT_APP_API_KEY,\r\n  authDomain: process.env.REACT_APP_AUTH_DOMAIN,\r\n  databaseURL: process.env.REACT_APP_DATABASE_URL,\r\n  projectId: process.env.REACT_APP_PROJECT_ID,\r\n  storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.REACT_APP_MESSAGING_SENDER_ID,\r\n  appId: process.env.REACT_APP_APP_ID,\r\n  measurementId: process.env.REACT_APP_MEASUREMENT_ID\r\n};\r\n\r\nvar fire = firebase.initializeApp(config);\r\nexport default fire;","import React, { useState, useEffect, useContext, createContext } from \"react\";\r\nimport Cookies from 'universal-cookie';\r\nimport fire from './firebase';\r\n\r\nconst authContext = createContext();\r\nexport default authContext;\r\n// Provider component that wraps your app and makes auth object ...\r\n// ... available to any child component that calls useAuth().\r\nexport function ProvideAuth({ children }) {\r\n  const auth = useProvideAuth();\r\n  return <authContext.Provider value={auth}>{children}</authContext.Provider>;\r\n}\r\n\r\n// Hook for child components to get the auth object ...\r\n// ... and re-render when it changes.\r\nexport const useAuth = () => {\r\n  return useContext(authContext);\r\n};\r\n\r\n// Provider hook that creates auth object and handles state\r\nconst useProvideAuth = () => {\r\n  const [authStatus, setAuthStatus] = useState({haveTriedLogin:false,isConnected:false,user:undefined,firebaseTestLogin:false});\r\n  const cookies = new Cookies();\r\n  \r\n  const getURLParameter = (name) => {\r\n    return decodeURIComponent((new RegExp('[?|&]' + name + '=' + '([^&;]+?)(&|#|;|$)').exec(window.location.href) ||\r\n      [null, ''])[1].replace(/\\+/g, '%20')) || null;\r\n  }\r\n  \r\n  const get = async (url) => {\r\n    try {\r\n      let response = await fetch(url, {method: \"GET\"});\r\n      const jsondata = await response.json();\r\n      return jsondata;\r\n    }\r\n    catch (error) {\r\n      throw error;\r\n    }    \r\n  }\r\n\r\n  const signInWithCustomToken = (token) => new Promise((resolve,reject) => {\r\n    console.log('firebase init')\r\n    fire.auth().signInWithCustomToken(token)\r\n    .then(() => {\r\n      console.log('loged in')\r\n      resolve()\r\n    })\r\n    .catch((err)=>{\r\n      console.log('not loged in')\r\n      cookies.remove('token')\r\n      reject(err)\r\n    })\r\n  })\r\n\r\n  const loginWithCookies = () => new Promise( (resolve, reject) => {\r\n    console.log('try to log with Cookies')\r\n    let token = undefined;\r\n    try {\r\n      token = cookies.get('token');\r\n    } catch (error) {reject(error)} \r\n    if (token === undefined) reject('no Token')\r\n    else{\r\n      console.log('try to use cookies token')\r\n      signInWithCustomToken(token)\r\n      .then(()=>{\r\n        console.log('log with cookies works')\r\n        resolve()\r\n      })\r\n      .catch((err)=>{\r\n        console.log('log with cookies failed')\r\n        reject(err)\r\n      })\r\n    }\r\n  })\r\n\r\n  const getInfoFromUrl = () => new Promise(async (resolve, reject) => {\r\n    console.log('try to get Token')\r\n    var code = getURLParameter('code');\r\n    var state = getURLParameter('state');\r\n    if(code!==null){\r\n      // This is the URL to the HTTP triggered 'token' Firebase Function.\r\n      var tokenFunctionURL = process.env.REACT_APP_API_URL+'token';\r\n      let url = tokenFunctionURL + '?code=' + encodeURIComponent(code) + '&state=' + encodeURIComponent(state);\r\n      try {\r\n        let res = await get(url);\r\n        if (res.token) {\r\n          console.log('info in url')\r\n          cookies.set('token', res.token.toString());\r\n          signInWithCustomToken(res.token).then(()=>resolve()).catch((err)=>reject(err))\r\n        }\r\n      } catch (error) {reject(error)}\r\n    }\r\n    else{\r\n      console.log('no info in url')\r\n      loginWithCookies()\r\n      .then(()=>{resolve()})\r\n      .catch((err)=>{reject(err)})\r\n    }\r\n  })\r\n\r\n  // Wrap any Firebase methods we want to use making sure ...\r\n  // ... to save the user to state.\r\n  const signIn = (redirectToDashboard,props) => new Promise((resolve,reject) => {\r\n    if(authStatus.isConnected){\r\n      resolve()\r\n    }\r\n    else{\r\n      getInfoFromUrl()\r\n      .then(()=>{\r\n        if(redirectToDashboard) props.history.push(\"/dashboard\")\r\n        resolve()\r\n        })\r\n      .catch((err)=>{\r\n        console.log(err)\r\n        console.log('redirect')\r\n        redirectCheck(0,resolve)\r\n      })\r\n    }\r\n  });\r\n\r\n  const redirectCheck = (index,resolve) => {\r\n    console.log(authStatus)\r\n    if(authStatus.firebaseTestLogin || index >= 10){\r\n      if(authStatus.isConnected) resolve()\r\n      else window.location.href = process.env.REACT_APP_API_URL+'redirect'\r\n    }\r\n    else{\r\n      setTimeout(()=>{\r\n        redirectCheck(index+1,resolve)\r\n      },500)\r\n    }\r\n  }\r\n  \r\n  const signOut = (props) => {\r\n    return fire\r\n      .auth()\r\n      .signOut()\r\n      .then(() => {\r\n        props.history.push('/')\r\n        setAuthStatus({...authStatus,isConnected:false,user:undefined,haveTriedLogin:false});\r\n      });\r\n  };\r\n\r\n\r\n  // Subscribe to user on mount\r\n  // Because this sets state in the callback it will cause any ...\r\n  // ... component that utilizes this hook to re-render with the ...\r\n  // ... latest auth object.\r\n  useEffect(() => {\r\n    const unsubscribe = fire.auth().onAuthStateChanged(user => {\r\n      if (user) {\r\n        console.log(\"status change connected\")\r\n        setAuthStatus({...authStatus,isConnected:true,user,haveTriedLogin:true,firebaseTestLogin:true});\r\n      } else {\r\n        console.log(\"status change disconnected\")\r\n        setAuthStatus({...authStatus,isConnected:false,user:undefined,haveTriedLogin:false,firebaseTestLogin:true});\r\n      }\r\n    });\r\n\r\n    // Cleanup subscription on unmount\r\n    return () => unsubscribe();\r\n  }, []);\r\n  \r\n  // Return the user object and auth methods\r\n  return {\r\n    authStatus,\r\n    signOut,\r\n    signIn,\r\n  };\r\n}","import React, {useContext,useState} from \"react\";\r\nimport {Toolbar,AppBar,Typography, Menu, MenuItem, IconButton} from '@material-ui/core';\r\nimport {AccountCircle,MailOutline} from '@material-ui/icons';\r\nimport { useAuth } from \"../../provider/auth\";\r\n\r\nimport \"./header.css\";\r\n\r\n  \r\nconst Header = (props) => {\r\n    const auth = useAuth();\r\n\r\n    const [anchorEl, setAnchorEl] = useState(null);\r\n    const isMenuOpen = Boolean(anchorEl);\r\n  \r\n    const handleProfileMenuOpen = event => {\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    const handleMenuClose = () => {\r\n        setAnchorEl(null);\r\n    };\r\n\r\n    const handleSendMail = () =>  {\r\n        window.location.href = \"mailto:feedmyflow@gmail.com\"\r\n    }\r\n  \r\n    const menuId = 'account-menu';\r\n    const renderMenu = (\r\n        <Menu\r\n          anchorEl={anchorEl}\r\n          anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n          id={menuId}\r\n          keepMounted\r\n          transformOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n          open={isMenuOpen}\r\n          onClose={handleMenuClose}\r\n        >\r\n            {auth.authStatus.isConnected ?\r\n                <MenuItem onClick={() => auth.signOut(props)}>Disconnect</MenuItem>\r\n            :\r\n                <MenuItem onClick={() => auth.signIn(true,props)}>Connect</MenuItem>\r\n            }\r\n        </Menu>\r\n      );\r\n\r\n  return (\r\n    <>\r\n        <AppBar position=\"static\" color=\"default\">\r\n            <Toolbar>\r\n                <Typography className=\"title\" variant=\"h6\">FeedMyFlow</Typography>\r\n                <IconButton\r\n                edge=\"end\"\r\n                aria-label=\"send mail to dev\"\r\n                aria-controls={menuId}\r\n                aria-haspopup=\"true\"\r\n                onClick={handleSendMail}\r\n                color=\"inherit\"\r\n                >\r\n                    <MailOutline/>\r\n                </IconButton>\r\n                <IconButton\r\n                edge=\"end\"\r\n                aria-label=\"account of current user\"\r\n                aria-controls={menuId}\r\n                aria-haspopup=\"true\"\r\n                onClick={handleProfileMenuOpen}\r\n                color=\"inherit\"\r\n                >\r\n                    <AccountCircle />\r\n                </IconButton>\r\n            </Toolbar>\r\n        </AppBar>\r\n        {renderMenu}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Header;","import { makeStyles } from '@material-ui/core/styles';\r\nimport {Button} from '@material-ui/core';\r\nimport React, { useEffect, useContext } from 'react';\r\nimport Header from '../../components/header/header';\r\nimport { useAuth } from \"../../provider/auth\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: '100%', // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n}));\r\n\r\nconst Home = (props) => {\r\n\r\n  const auth = useAuth();\r\n\r\n  return (\r\n    <>\r\n      <Header {...props}/>\r\n      <Button onClick={() => auth.signIn(true,props)}>Sign In</Button>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Home;","import React,{useEffect} from \"react\";\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport {useAuth} from \"../../provider/auth\";\r\n\r\nconst AuthChecker = (props) => {\r\n    const auth = useAuth();\r\n\r\n    useEffect(()=>{\r\n        if(!auth.authStatus.haveTriedLogin) auth.signIn(false,null)\r\n    },[])\r\n\r\n    return (\r\n        <CircularProgress />\r\n    );\r\n};\r\n\r\nexport default AuthChecker;\r\n","import React,{useState,useEffect, useContext} from \"react\";\r\nimport AuthChecker from \"../../components/authChecker/authChecker\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport { useAuth } from \"../../provider/auth\";\r\n\r\nconst Login = ({component: Component,...rest}) => {\r\n  const auth = useAuth();\r\n  \r\n  return (\r\n      <Route\r\n      {...rest}\r\n      render={props => {\r\n        if(!auth.authStatus.haveTriedLogin){\r\n          return <AuthChecker/>;\r\n        }\r\n        else{\r\n        return (\r\n            <Redirect\r\n            to={{\r\n                pathname: auth.authStatus.isConnected ? \"/dashboard\" : \"/\",\r\n                state: {\r\n                from: props.location\r\n                }\r\n            }}\r\n            />\r\n        );\r\n        }}\r\n      }\r\n    />\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import React, {useState,useEffect,forwardRef,useImperativeHandle} from 'react';\r\nimport {Modal,Backdrop,Fade} from '@material-ui/core';\r\nimport {Grid,TextField,Select,MenuItem,Typography,Card,CardContent,Divider,Button} from '@material-ui/core';\r\nimport {MuiPickersUtilsProvider,KeyboardTimePicker,KeyboardDatePicker} from '@material-ui/pickers';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport DateFnsUtils from '@date-io/date-fns';\r\nimport fire from '../../provider/firebase';\r\n\r\n  \r\nconst useStyles = makeStyles(theme => ({\r\n  modal: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  }\r\n}));\r\n\r\nconst CreationModal = forwardRef((props,ref) => {\r\n  \r\n  let isEvent = props.event != undefined;\r\n  let isMedia = false;\r\n  if(isEvent) isMedia = props.event.media != undefined;\r\n  \r\n  const db = fire.firestore();\r\n  const userUid = fire.auth().currentUser.uid\r\n\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n  const [haveModification, setHaveModification] = useState(false);\r\n  const [canSave, setCanSave] = useState(false);\r\n\r\n  const [publicationTime,setPublicationTime] = useState(isEvent ? new Date(props.event.publicationTime.toDate()) : new Date());\r\n  const [shareCommentary,setShareCommentary] = useState(isEvent ? props.event.shareCommentary : '');\r\n  const [shareMediaCategory,setShareMediaCategory] = useState(isEvent ? props.event.shareMediaCategory : 'NONE');\r\n  const [visibility,setVisibility] = useState(isEvent ? props.event.visibility : 'PUBLIC');\r\n  const [mediaTitle,setMediaTitle] = useState(isEvent && isMedia ? props.event.media.title : '');\r\n  const [mediaDescription,setMediaDescription] = useState(isEvent && isMedia ? props.event.media.description : '');\r\n  const [mediaUrl,setMediaUrl] = useState(isEvent && isMedia ? props.event.media.originalUrl : '');\r\n  \r\n  useImperativeHandle(ref, () => ({\r\n    handleOpen(){\r\n      setOpen(true);\r\n    }\r\n  }))\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  useEffect(()=>{\r\n    if(shareCommentary !== ''){\r\n      if(shareMediaCategory === 'NONE') setCanSave(true);\r\n      else{\r\n        if(mediaTitle !== '' && mediaDescription !== '' && mediaUrl !== '') setCanSave(true);\r\n        else setCanSave(false);\r\n      }\r\n    }\r\n    else setCanSave(false);\r\n    return () => {\r\n      setHaveModification(true)\r\n    }\r\n  },[publicationTime,shareCommentary,shareMediaCategory,visibility,mediaTitle,mediaDescription,mediaUrl])\r\n\r\n  const onSendData = () => {\r\n    let linekdinPost = {\r\n        \"author\":\"urn:li:person:\"+userUid.split(':')[1],\r\n        \"userUID\":userUid,\r\n        \"publicationTime\":publicationTime,\r\n        \"shareCommentary\": shareCommentary,\r\n        \"visibility\": visibility,\r\n        \"shareMediaCategory\": shareMediaCategory,\r\n        \"rawDate\" : publicationTime.getDate()+\"/\"+publicationTime.getMonth()+1+\"/\"+publicationTime.getFullYear(),\r\n        \"rawTime\" : publicationTime.getHours()+\":\"+publicationTime.getMinutes()+\":00\"\r\n    }\r\n    if(shareMediaCategory !== \"NONE\" && mediaTitle!==\"\" && mediaDescription!==\"\" && mediaUrl!==\"\"){\r\n        linekdinPost[\"media\"] = {\r\n            \"title\":mediaTitle,\r\n            \"description\":mediaDescription,\r\n            \"originalUrl\":mediaUrl,\r\n        }\r\n    }\r\n    db.collection('user').doc(userUid).collection('post').add(linekdinPost)\r\n    handleClose()\r\n    if(!isEvent){\r\n      setPublicationTime(new Date());\r\n      setShareCommentary('');\r\n      setShareMediaCategory('NONE');\r\n      setVisibility('PUBLIC');\r\n      setMediaTitle('');\r\n      setMediaDescription('');\r\n      setMediaUrl('');\r\n    }\r\n  }\r\n\r\n  const onUpdateData = () => {\r\n    let postId = props.event.id\r\n    let linekdinPost = {\r\n        \"author\":\"urn:li:person:\"+userUid.split(':')[1],\r\n        \"userUID\":userUid,\r\n        \"publicationTime\":publicationTime,\r\n        \"shareCommentary\": shareCommentary,\r\n        \"visibility\": visibility,\r\n        \"shareMediaCategory\": shareMediaCategory,\r\n        \"rawDate\" : publicationTime.getDate()+\"/\"+publicationTime.getMonth()+1+\"/\"+publicationTime.getFullYear(),\r\n        \"rawTime\" : publicationTime.getHours()+\":\"+publicationTime.getMinutes()+\":00\"\r\n    }\r\n    if(shareMediaCategory !== \"NONE\" && mediaTitle!==\"\" && mediaDescription!==\"\" && mediaUrl!==\"\"){\r\n        linekdinPost[\"media\"] = {\r\n            \"title\":mediaTitle,\r\n            \"description\":mediaDescription,\r\n            \"originalUrl\":mediaUrl,\r\n        }\r\n    }\r\n    db.collection('user').doc(userUid).collection('post').doc(postId).update(linekdinPost)\r\n    handleClose()\r\n    setHaveModification(false);\r\n  }\r\n\r\n  const onDeleteData = () => {\r\n    let postId = props.event.id\r\n    if (window.confirm(\"Etes vous sur de vouloir supprimer ce post ?\")) {\r\n      db.collection('user').doc(userUid).collection('post').doc(postId).delete()\r\n    } \r\n  }\r\n\r\n  const mediaRender = () => {\r\n  if (shareMediaCategory !== 'NONE'){\r\n    return(\r\n      <Grid container spacing={3}>\r\n        <Grid item xs={12}>\r\n          <TextField \r\n            fullWidth\r\n            id=\"mediaTitle\"\r\n            label=\"Titre\"\r\n            value={mediaTitle}\r\n            onChange={e=>setMediaTitle(e.target.value)}\r\n          />\r\n      </Grid>\r\n      <Grid item xs={12}>\r\n        <TextField\r\n          fullWidth\r\n          id=\"mediaDescription\"\r\n          label=\"Description\"\r\n          value={mediaDescription}\r\n          onChange={e=>setMediaDescription(e.target.value)}\r\n          multiline\r\n        />\r\n      </Grid>\r\n      <Grid item xs={12}>\r\n        <TextField\r\n          fullWidth\r\n          id=\"mediaUrl\"\r\n          label=\"Url\"\r\n          value={mediaUrl}\r\n          onChange={e=>setMediaUrl(e.target.value)}\r\n        />\r\n        </Grid>\r\n      </Grid>\r\n    )\r\n  }\r\n}\r\n\r\n  return (\r\n    <Modal\r\n      aria-labelledby=\"transition-modal-title\"\r\n      aria-describedby=\"transition-modal-description\"\r\n      className={classes.modal}\r\n      open={open}\r\n      onClose={handleClose}\r\n      closeAfterTransition\r\n      BackdropComponent={Backdrop}\r\n      BackdropProps={{\r\n        timeout: 500,\r\n      }}\r\n    >\r\n      <Fade in={open}>\r\n        <Card>\r\n          <CardContent>\r\n            {isEvent ?\r\n              <Typography variant=\"h5\" component=\"h2\">Post prévu pour le {props.event.rawDate} à {props.event.rawTime}</Typography>\r\n            :\r\n              <Typography variant=\"h5\" component=\"h2\">Create</Typography>\r\n            }\r\n            <Divider/>\r\n            <Grid container spacing={3}>\r\n              <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n                <Grid item xs={12} md={3}>\r\n                  <KeyboardDatePicker\r\n                      margin=\"normal\"\r\n                      id=\"date-picker-dialog\"\r\n                      label=\"Date picker dialog\"\r\n                      format=\"dd/MM/yyyy\"\r\n                      value={publicationTime}\r\n                      onChange={e=>setPublicationTime(e)}\r\n                      KeyboardButtonProps={{\r\n                          'aria-label': 'change date',\r\n                      }}\r\n                  />\r\n                </Grid>\r\n                <Grid item xs={12} md={3}>\r\n                  <KeyboardTimePicker\r\n                      margin=\"normal\"\r\n                      id=\"time-picker\"\r\n                      label=\"Time picker\"\r\n                      value={publicationTime}\r\n                      ampm={false}\r\n                      minutesStep={15}\r\n                      onChange={e=>setPublicationTime(e)}\r\n                      KeyboardButtonProps={{\r\n                          'aria-label': 'change time',\r\n                      }}\r\n                  />\r\n                </Grid>\r\n              </MuiPickersUtilsProvider>\r\n              <Grid item xs={12} md={3}>\r\n                <Select\r\n                  labelId=\"Type de post\"\r\n                  id=\"shareMediaCategory\"\r\n                  value={shareMediaCategory}\r\n                  onChange={e=>setShareMediaCategory(e.target.value)}>\r\n                    <MenuItem value={'NONE'}>Juste Text</MenuItem>\r\n                    <MenuItem value={'ARTICLE'}>Avec Article</MenuItem>\r\n                    <MenuItem value={'IMAGE'}>Avec Image</MenuItem>\r\n                </Select>\r\n              </Grid>\r\n              <Grid item xs={12} md={3}>\r\n                <Select\r\n                  labelId=\"Visibilité\"\r\n                  id=\"visibility\"\r\n                  value={visibility}\r\n                  onChange={e=>setVisibility(e.target.value)}>\r\n                    <MenuItem value={'PUBLIC'}>Publique</MenuItem>\r\n                    <MenuItem value={'CONNECTIONS'}>connexions</MenuItem>\r\n                </Select>\r\n              </Grid>\r\n            </Grid>\r\n            <Grid container spacing={3}>\r\n              <Grid item xs={12}>\r\n                <TextField \r\n                  fullWidth \r\n                  label=\"Contenu du post\" \r\n                  id=\"shareCommentary\"\r\n                  value={shareCommentary}\r\n                  onChange={e=>setShareCommentary(e.target.value)}\r\n                  multiline\r\n                />\r\n              </Grid>\r\n            </Grid>\r\n            {mediaRender()}\r\n            {isEvent ?\r\n              <>\r\n                <Button variant=\"contained\" color=\"primary\" onClick={onDeleteData}>Delete</Button>\r\n                <Button variant=\"contained\" color=\"primary\" onClick={onUpdateData} disabled={!haveModification}>Update</Button>\r\n              </>\r\n            :\r\n              <Button variant=\"contained\" color=\"primary\" onClick={onSendData} disabled={!canSave}>Create</Button>\r\n            }\r\n          </CardContent>\r\n        </Card>\r\n      </Fade>\r\n    </Modal>\r\n  );\r\n})\r\nexport default CreationModal;","import React, { useState, useEffect, useRef } from \"react\";\r\nimport {Calendar,momentLocalizer} from 'react-big-calendar';\r\nimport {Grid,Container,Toolbar,AppBar,Typography,Paper,Button} from '@material-ui/core';\r\nimport CreationModal from '../../components/creationModal/creationModal';\r\nimport Header from \"../../components/header/header\";\r\nimport fire from '../../provider/firebase';\r\nimport moment from \"moment\";\r\nimport 'moment/locale/fr';\r\n\r\nimport \"react-big-calendar/lib/css/react-big-calendar.css\";\r\nimport \"./calendar.css\";\r\n\r\nconst localizer = momentLocalizer(moment)\r\n  \r\nconst Mycalendar = (props) => {\r\n\r\n  const [eventsList,setEventsList] = useState([]);\r\n  const creationModalRef = useRef();\r\n  const eventsRef = useRef([]);\r\n\r\n  let currentUser = undefined;\r\n  let userUid = undefined;\r\n  let db = fire.firestore();\r\n\r\n  useEffect(()=>{\r\n    currentUser = fire.auth().currentUser;\r\n    userUid = currentUser.uid;\r\n    var unsubscribeSnapshot = db.collection('user').doc(userUid).collection('post').onSnapshot((documents) => {\r\n      let newEventsList = []\r\n      documents.docs.map((query,i) => {\r\n        let data = query.data()\r\n        data[\"itemId\"] = i\r\n        data[\"id\"] = query.id\r\n        data[\"title\"] = data.shareCommentary\r\n        data[\"start\"] = new Date(data.publicationTime.toDate())\r\n        data[\"end\"] =  moment(data.start).add(15, 'm').toDate()\r\n        newEventsList.push(data)\r\n      })\r\n      newEventsList.sort((a,b)=>{return a.start - b.start})\r\n      setEventsList(newEventsList)\r\n    return () =>{\r\n      unsubscribeSnapshot();\r\n    }\r\n    });\r\n  },[])\r\n\r\n  useEffect(() => {\r\n    eventsRef.current = eventsRef.current.slice(0, eventsList.length);\r\n }, [eventsList]);\r\n\r\n  const nextPost = () => {\r\n    return(\r\n      <>\r\n        {eventsList.map(event=>(\r\n          <div key={event.id}>\r\n            <p  onClick={()=>{eventsRef.current[event.itemId].handleOpen()}}>{event.rawDate + \" \" + event.rawTime + \" : \" + event.title}</p>\r\n            <CreationModal ref={r => eventsRef.current[event.itemId] = r} event={event} />\r\n          </div>\r\n        ))}\r\n      </>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <Header {...props}/>\r\n      <Container className=\"menu\">\r\n        <Grid container spacing={2}>\r\n          <Grid item md={12} lg={8}>\r\n            <Paper>\r\n              <Calendar\r\n                popup\r\n                step={60}\r\n                // showMultiDayTimes\r\n                localizer={localizer}\r\n                defaultDate={new Date()}\r\n                defaultView=\"month\"\r\n                culture={'fr'}\r\n                events={eventsList}\r\n                drilldownView=\"week\"\r\n                style={{ height: \"85vh\" }}\r\n                views={{ month: true, week: true }}\r\n                onSelectEvent={(event,e)=>{eventsRef.current[event.itemId].handleOpen()}}\r\n              />\r\n            </Paper>\r\n          </Grid>\r\n          <Grid item md={12} lg={4}>\r\n            <Button variant=\"contained\" color=\"primary\" onClick={()=>{creationModalRef.current.handleOpen()}}>Create</Button>\r\n            <CreationModal ref={creationModalRef}/>\r\n            <Paper>\r\n              <Typography className=\"title\" variant=\"h6\">Next post...</Typography>\r\n              {nextPost()}\r\n            </Paper>\r\n          </Grid>\r\n        </Grid>\r\n      </Container>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Mycalendar;","import React from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport AuthChecker from \"../authChecker/authChecker\";\r\nimport { useAuth } from \"../../provider/auth\";\r\n\r\nconst ProtectedRoute = ({comp: Component,...rest}) => {\r\n  const auth = useAuth();\r\n\r\n  return (\r\n      <Route\r\n      {...rest}\r\n      render={props => {\r\n        if(!auth.authStatus.haveTriedLogin){\r\n          return <AuthChecker {...props}/>;\r\n        }\r\n        else{\r\n          if (auth.authStatus.isConnected) {\r\n            return <Component {...props} />;\r\n          } else {\r\n            return (\r\n              <Redirect\r\n                to={{\r\n                  pathname: \"/\",\r\n                  state: {\r\n                    from: props.location\r\n                  }\r\n                }}\r\n              />\r\n            );\r\n          }\r\n        }}\r\n      }\r\n    />\r\n  );\r\n};\r\n\r\nexport default ProtectedRoute;\r\n","import React, { useState, useMemo } from 'react';\r\nimport { BrowserRouter, Route, Switch,Redirect } from \"react-router-dom\";\r\nimport Home from './view/home/home';\r\nimport Login from './view/login/login';\r\nimport MyCalendar from './view/calendar/calendar';\r\nimport ProtectedRoute from \"./components/protectedRoute/protectedRoute\";\r\nimport { ProvideAuth } from \"./provider/auth.js\";\r\n\r\nimport './App.css';\r\n\r\nexport const App = () => {\r\n\r\n  return (\r\n    <BrowserRouter>\r\n      <ProvideAuth>\r\n        <Switch>\r\n          <Route exact path=\"/\" component={Home} />\r\n          <Route exact path=\"/login\" component={Login} />\r\n          <ProtectedRoute exact path=\"/dashboard\" comp={MyCalendar} />\r\n          <Route path=\"*\" component={()=>{return(<Redirect to='/'/>)}} />\r\n        </Switch>\r\n      </ProvideAuth>\r\n    </BrowserRouter>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}